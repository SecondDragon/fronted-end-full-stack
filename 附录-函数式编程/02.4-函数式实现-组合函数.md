# 02.4-函数式实现-组合函数

## 一 程序的输出与输入

在 Linux 中提供了一个管道操作符 `|`，还有一个命令 grep 在文本内搜索指定内容并显示内容。首先创建一个 demo.txt，内容如下：

```txt
hello
world
order
```

现在我们要实现使用 cat 命令读取到 demo.txt ，接着让 grep 来查找并显示这个文本中包含 or 字符串的行，那么命令就是：

```shell
cat demo.txt | grep 'or'
```

原本如果要在文本中查询 or 字符串的行，使用 grep 的完整命令是： `grep 'or' demo.txt`，但是上述命令无需输入文本名，这是因为管道操作符左侧之前的 cat 程序读取到了文本，通过管道将其作为输入传递给了 grep 程序，grep 程序已经拿到文本！

甚至可以继续利用管道计算字符串出现的次数：

```shell
# wc 用于获取单词数量
cat demo.txt | grep 'or' | wc
```

管道操作符传递了这样的信息：**每个程序的输出应该是另外一个程序的输入**。

在 01.1 章节中，我们制作了这样的函数：

```js
const showStudent = run(append('box'), csv, find(db))
```

其实 append、csv、find 这些函数的输出作为了 showStudent 的输入，我们称之为组合函数。

## 二 组合函数

### 2.1 组合函数创建

根据组合函数的定义创建一个组合函数，其要求无非是：该函数接收一个函数的输出，并将其用作输入以传递给另外一个函数。

```js
const compose = (a, b) => {
  return (c) => a(b(c))
}
```

compose 函数接收两个参数：函数 a 和函数 b，返回一个接收 c 为参数的函数。compose 函数将用输入 c 调用函数 b，b 的输出作为 a 的输入使用。

贴士：这里可以看出，先执行了 b，再执行了 a，自行的顺序是从右到左。
